\section{Conclusions and Future Work}
\label{sec:future}

Carnegie Mellon University's operating systems course offers a series of concurrency-focused projects to advanced undergraduates focused on low-level software development.
These projects culminate in the development of a Pebbles kernel, a fully preemptible UNIX-like kernel which includes process lifecycle management, virtual memory, and some device drivers, during the course's six-week-long fourth project.
% Dave: You could add here a brief blurb about what students accomplish, e.g. LOC, boot on real hardware, whatever. Or it would be fine without.
In order to keep up with emerging trends in hardware architecture, especially the increasing focus on massively multi-core processing, we seek to include more hardware concurrency and the resulting complexity in the course's curriculum.

% With the radical changes in computer architecture induced by the switch from speed through faster cycle time to speed through more cores, and more complex memory system semantics, operating systems kernels are experiencing rapid change and effective education of kernel programmers becomes much more labor intensive, especially in terms of concurrency error debugging, or much less detailed and hardware accurate.

% Carnegie Mellon University's undergraduate operating systems course has a tradition of requiring students to tackle highly hardware accurate kernel design and development.
% Rather than compromise the low level detail that our students overcome in a semester, as we include more hardware concurrency and the resulting complexity, we are experimenting with tools that simplify some of the most time consuming changes challenges our students face.

Rather than making room for more material by reducing the projects' design complexity, which we feel would compromise the learning experience, we are experimenting with concurrency debugging tools to let students spend less time searching for errors in their code.
We have presented Landslide, a tool that integrates with the Simics simulator students already use and provides a more principled approach to bug-finding than conventional stress testing.

Due to the open-ended design problems students solve in their kernels, Landslide imposes a moderate annotation burden in order to instrument a kernel for systematic testing.
However, by the very nature of having enough spare time to volunteer, the selection of students we worked with to use Landslide was necessarily biased towards the ``top of the class''.
Though our experiments with these students show promising results, we need to reduce Landslide's annotation burden as much as possible to make it useful for struggling students as well.

% some things we can automate -- inspired by automatic malloc instrumentation -- but some things require changing the spec

\subsubsection{Automatic instrumentation}
TODO

\subsubsection{Mandating API names}
For example, rather than providing \x{tell_landslide_thread_runnable()}, we could mandate that the scheduler's code path to making a thread runnable include a function with a specified name.

\subsubsection{Mandating design}
TODO

% tighten
% Landslide is a tool that integrates into the Simics x86 hardware simulator and drives repeated execution of a given test with a unique scheduling of context switches on each execution, known as systematic testing, ensuring that extremely rare execution sequencings can be experienced by the test in a short period of time relative to simple repeated execution of tests, known as stress testing.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% rephrase
% Landslide automates a minimal set of context switch points, known as decision points, given annotations that expose invocation of fundamental operating system kernel operations, and offers student users additional annotations to add, and refine, decision points to focus exploration on user-guided aspects of their kernels.

% Experiments with Landslide on single-core multi-threaded kernels during a prior course offering show promising results. % rephrase to say "students from a prior semester"
% Students were able to find unknown and unexpected bugs after a couple of hours of tool learning and kernel annotating.

% tighten
% With this promising result, and our recent experience with a multi-processor kernel extension project,
% good
% we believe systematic testing can be useful for helping our students learn more about concurrent programming with the same amount of time and effort.

% Add: "However, ... top students vs struggling students" transition sentence
% Replace following two paragraphs with a new one

Landslide needs to be extended to cope with the multiple scheduler queues that occur in multi-core hardware, however, much of this can be managed with slight variations of the annotations student provide, naming the core a thread will runs on, for example.

To fully realize this benefit Landslide usability should be improved.
For example, our class notes communicate execution sequencing with a tabular representation of thread execution; Landslide's presentation of a buggy sequence could be tailored to match our teaching methodology.

% this should all turn into a bulleted list of improvement areas
Tool usability is greatly improved by lowering the start up effort required of each student.
Much of the annotation our students must add to their kernel could be eliminated if the course project specification required prescribed names for prescribed functions, so Landslide could easily identify what the student kernel is doing.
There is a downside to doing too much of this, as the design of kernel interfaces is an important part of the course project, and prescribed templates could constrain the design space too much.

% condense below two into a single sentence

% Pebbles and Landslide have lots of future challenges as we introduce memory systems with complex consistency rules exposed to the kernel programmer, or decide to explore performance issues with data non-locality and sharing patterns.

% Landslide utility is also not restricted to Pebbles.
% It could be extracted from Simics and embedded in a virtual machine platform, to begin the transition to supporting production operating system kernel development.


\section*{Acknowledgments}

Many people have contributed to the development of
15-410 over the past decade.
Stephen Muckle, currently at Qualcomm, led
the switch to x86 projects running in Simics.
Nathaniel Wesley Filardo,
currently a Ph.D.\ candidate at Johns Hopkins,
increased the sanity of the build infrastructure,
designed the \x{swexn()} system call, and helped critique this paper.
The current reference kernel is named ``pathos''
and was written by Michael J. Sullivan,
currently a CMU CS Ph.D.\ candidate,
and Elly Fong-Jones, currently at Google.
The SMP infrastructure code was contributed by
Ryan Pearl, currently at Mozilla.
Joshua Wise, currently at NVIDIA,
proposed and led several kernel-extension projects,
including the hypervisor project.
Over the past decade the course has benefitted
greatly from free educational Simics licenses,
donated initially by Virtutech and recently by
Wind River.
Code-size numbers were generated using David A.\ Wheeler's
``SLOCCount.''
Work on Landslide was sponsored by the U.S. Army Research Office under grant number W911NF0910273.
